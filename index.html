{% extends "base.html" %}

{% block content %}
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">
            <i class="fas fa-atom"></i>
            Protein Structure Prediction
        </h1>
        <p class="hero-subtitle">
            Predict 3D protein structures from amino acid sequences using Meta AI's ESMFold algorithm
        </p>
    </div>
</div>

<div class="container">
    <div class="prediction-section">
        <div class="input-panel">
            <div class="panel-header">
                <h2><i class="fas fa-keyboard"></i> Input Sequence</h2>
                <div class="info-badge">
                    <i class="fas fa-info-circle"></i>
                    Enter 10-1000 amino acids
                </div>
            </div>
            
            <div class="sequence-input-container">
                <textarea 
                    id="sequenceInput" 
                    placeholder="Enter protein sequence (e.g., MGSSHHHHHHSSGLV...)"
                    maxlength="1000"
                >{{ default_sequence }}</textarea>
                <div class="sequence-info">
                    <span id="sequenceLength">{{ default_sequence|length }}</span> amino acids
                    <button id="clearSequence" class="btn-link">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>

            <div class="action-buttons">
                <button id="predictButton" class="btn-primary">
                    <i class="fas fa-magic"></i>
                    Predict Structure
                </button>
                <button id="exampleButton" class="btn-secondary">
                    <i class="fas fa-flask"></i>
                    Load Example
                </button>
            </div>

            <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <p>Predicting structure... This may take a few minutes.</p>
            </div>
        </div>

        <div class="results-panel" id="resultsPanel" style="display: none;">
            <div class="panel-header">
                <h2><i class="fas fa-cube"></i> Predicted Structure</h2>
                <div class="confidence-badge" id="confidenceBadge">
                    <span id="confidenceScore"></span>
                </div>
            </div>

            <div class="visualization-container">
                <div id="viewer" class="structure-viewer"></div>
                <div class="viewer-controls">
                    <button id="resetView" class="btn-control">
                        <i class="fas fa-home"></i> Reset View
                    </button>
                    <button id="toggleSpin" class="btn-control">
                        <i class="fas fa-sync-alt"></i> Toggle Spin
                    </button>
                    <select id="styleSelect" class="style-select">
                        <option value="cartoon">Cartoon</option>
                        <option value="sphere">Sphere</option>
                        <option value="stick">Stick</option>
                        <option value="line">Line</option>
                    </select>
                </div>
            </div>

            <div class="results-info">
                <div class="info-card">
                    <h3><i class="fas fa-chart-bar"></i> Confidence Score</h3>
                    <p id="confidenceDescription">
                        pLDDT (predicted Local Distance Difference Test) score on a scale of 0-100.
                        Higher values indicate more reliable predictions.
                    </p>
                </div>
                
                <div class="download-section">
                    <button id="downloadButton" class="btn-download">
                        <i class="fas fa-download"></i>
                        Download PDB File
                    </button>
                    <p class="download-note">
                        Download the predicted structure as a PDB file for use in PyMOL, ChimeraX, or other molecular viewers.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="errorMessage" class="error-message" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <span id="errorText"></span>
    </div>
</div>

<div class="info-section" id="about">
    <div class="container">
        <h2 style="text-align: center;">About ESMFold</h2>
        <div class="info-grid">
            <div class="info-card">
                <i class="fas fa-brain"></i>
                <h3>AI-Enhanced for Precision</h3>
                <p>Uses Meta AI's ESMFold algorithm based on the ESM-2 language model for accurate structure prediction.</p>
            </div>
            <div class="info-card">
                <i class="fas fa-zap"></i>
                <h3>Fast Predictive Intelligence</h3>
                <p>Get protein structure predictions in minutes instead of weeks compared to experimental methods.</p>
            </div>
            <div class="info-card">
                <i class="fas fa-database"></i>
                <h3>Free From Database Constraints</h3>
                <p>End-to-end prediction directly from sequence without requiring protein database searches.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}